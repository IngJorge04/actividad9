<!doctype html>
<html lang="es">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>Actividad 9</title>
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;600;700;800&family=Sora:wght@400;600;700&display=swap" rel="stylesheet">
  <style>
    :root{
      --bg-0:#0a0f1a;
      --bg-1:#0e1422;
      --bg-2:#0f1b2e;
      --text:#e7edf7;
      --muted:#94a3b8;
      --primary:#5b7cfa;
      --primary-2:#6ee7ff;
      --accent:#a78bfa;
      --card:#0e1726cc;
      --card-strong:#0e1726f2;
      --shadow:0 10px 30px rgba(0,0,0,.35), inset 0 1px 0 rgba(255,255,255,.03);
      --radius:16px;
      --blur:14px;
      --ring:0 0 0 2px rgba(99,102,241,.35),0 10px 30px rgba(99,102,241,.25);
      --speed:260ms;
    }
    *{box-sizing:border-box}
    html,body{height:100%}
    body{
      margin:0;
      background:radial-gradient(1200px 800px at 15% 10%, #141c34 0%, transparent 55%),
                 radial-gradient(900px 600px at 85% 10%, #0e3444 0%, transparent 50%),
                 linear-gradient(180deg, var(--bg-1), var(--bg-0));
      color:var(--text);
      font-family:Inter,system-ui,-apple-system,Segoe UI,Roboto,Arial,Helvetica Neue,sans-serif;
      overflow-x:hidden;
    }
    .bg-orbs{position:fixed;inset:0;pointer-events:none;z-index:-1;filter:saturate(120%) blur(20px)}
    .orb{position:absolute;width:48vmax;height:48vmax;border-radius:50%;
      background:radial-gradient(circle at 30% 30%, rgba(91,124,250,.65), rgba(167,139,250,.25) 45%, transparent 65%);
      mix-blend-mode:screen;animation:floatA 22s ease-in-out infinite}
    .orb.o2{left:55%;top:-10%;background:radial-gradient(circle at 60% 40%, rgba(110,231,255,.6), rgba(91,124,250,.2) 50%, transparent 68%);animation:floatB 28s ease-in-out infinite}
    .orb.o3{left:-10%;bottom:-15%;background:radial-gradient(circle at 40% 60%, rgba(167,139,250,.55), rgba(110,231,255,.18) 50%, transparent 70%);animation:floatC 32s ease-in-out infinite}
    @keyframes floatA{0%,100%{transform:translate3d(-10%, -5%,0) scale(1)}50%{transform:translate3d(6%,8%,0) scale(1.08)}}
    @keyframes floatB{0%,100%{transform:translate3d(0,0,0) scale(1)}50%{transform:translate3d(-4%,6%,0) scale(1.05)}}
    @keyframes floatC{0%,100%{transform:translate3d(0,0,0) scale(1)}50%{transform:translate3d(8%,-6%,0) scale(1.07)}}
    header{
      position:fixed;top:0;left:0;right:0;padding:16px 22px;z-index:30;
      backdrop-filter:blur(10px);-webkit-backdrop-filter:blur(10px);
      background:linear-gradient(180deg, rgba(10,15,26,.65), rgba(10,15,26,.25));
      border-bottom:1px solid rgba(255,255,255,.06);
    }
    .topbar{display:flex;gap:12px;align-items:center;justify-content:space-between;max-width:1200px;margin:0 auto}
    .brand{display:flex;gap:12px;align-items:center}
    .brand .logo{
      width:36px;height:36px;border-radius:10px;
      background:conic-gradient(from 120deg, var(--primary), var(--accent), var(--primary-2), var(--primary));
      filter:saturate(120%);box-shadow:0 8px 22px rgba(99,102,241,.35);
    }
    .brand h1{font-family:Sora,Inter,sans-serif;font-weight:800;font-size:16px;letter-spacing:.3px;margin:0}
    .brand small{display:block;color:var(--muted);font-weight:600;font-size:10px;letter-spacing:.6px;margin-top:-2px}
    .actions{display:flex;gap:10px;align-items:center}
    .btn{
      appearance:none;border:0;padding:10px 14px;border-radius:12px;color:var(--text);
      background:linear-gradient(180deg,#1a2440,#111a2e);box-shadow:var(--shadow);
      transition:transform var(--speed), box-shadow var(--speed), background var(--speed);
      font-weight:600;letter-spacing:.2px;cursor:pointer
    }
    .btn:hover{transform:translateY(-1px);box-shadow:var(--ring)}
    .btn.primary{background:linear-gradient(180deg, #3c5dff, #3149d9)}
    .btn.ghost{background:transparent;border:1px solid rgba(255,255,255,.08)}
    .btn.danger{background:linear-gradient(180deg, #ef4444, #dc2626)}
    .logout-btn{display:none}
    .spotlight{
      position:fixed;inset:0;pointer-events:none;z-index:29;
      background:radial-gradient(400px 400px at var(--x,50%) var(--y,50%), rgba(99,102,241,.25), transparent 60%);
      opacity:0;transition:opacity 250ms ease;
    }
    body.menu-open .spotlight{opacity:1}
    .menu{
      position:fixed;inset:0;display:grid;place-items:center;z-index:40;
      opacity:0;pointer-events:none;transition:opacity var(--speed) ease;
    }
    body.menu-open .menu{opacity:1;pointer-events:auto}
    .menu .panel{
      width:min(860px,92vw);border-radius:22px;padding:22px 22px 14px;
      background:linear-gradient(180deg, rgba(14,23,38,.8), rgba(14,23,38,.6));
      backdrop-filter:blur(var(--blur));-webkit-backdrop-filter:blur(var(--blur));
      border:1px solid rgba(255,255,255,.08);box-shadow:0 30px 70px rgba(0,0,0,.55)
    }
    .menu-grid{display:grid;grid-template-columns:repeat(4,1fr);gap:12px}
    .tile{
      position:relative;border-radius:16px;padding:16px;height:120px;
      background:linear-gradient(180deg,#0f1b2e,#0d1423);border:1px solid rgba(255,255,255,.06);
      box-shadow:var(--shadow);display:flex;flex-direction:column;gap:6px;justify-content:flex-end;cursor:pointer;
      overflow:hidden;transition:transform var(--speed), box-shadow var(--speed), border-color var(--speed)
    }
    .tile:before{
      content:"";position:absolute;inset:-1px;border-radius:inherit;
      background:radial-gradient(120px 120px at var(--mx,50%) var(--my,50%), rgba(99,102,241,.4), transparent 60%);
      opacity:.0;transition:opacity var(--speed)
    }
    .tile:hover{transform:translateY(-3px);box-shadow:0 20px 40px rgba(99,102,241,.25);border-color:rgba(99,102,241,.35)}
    .tile:hover:before{opacity:.7}
    .tile h3{margin:0;font-size:14px;font-weight:700}
    .tile p{margin:0;color:var(--muted);font-size:12px}
    .tag{position:absolute;top:10px;left:10px;font-size:10px;padding:4px 8px;border-radius:999px;
      background:rgba(99,102,241,.18);border:1px solid rgba(99,102,241,.35);color:#cbd5ff;font-weight:700;letter-spacing:.4px}
    main{max-width:1200px;margin:110px auto 120px;padding:0 20px}
    section{display:none}
    section.active{display:block;animation:fadeUp .6s both}
    @keyframes fadeUp{from{opacity:0;transform:translateY(8px)}to{opacity:1;transform:none}}
    .card{
      background:linear-gradient(180deg, var(--card), rgba(10,15,26,.78));
      border:1px solid rgba(255,255,255,.08);border-radius:18px;padding:22px;box-shadow:var(--shadow)
    }
    .hero{display:grid;grid-template-columns:1.1fr .9fr;gap:24px}
    .title{font-family:Sora,Inter,sans-serif;font-weight:800;font-size:36px;margin:0 0 8px}
    .lead{color:#b8c3d9;margin:0 0 16px}
    .pill{display:inline-flex;gap:8px;align-items:center;background:rgba(99,102,241,.14);
      border:1px solid rgba(99,102,241,.35);padding:8px 12px;border-radius:999px;color:#cbd5ff;font-weight:700;font-size:12px}
    .calc{display:grid;grid-template-columns:1fr;gap:14px}
    .display{
      font-family:Sora,Inter,sans-serif;background:linear-gradient(180deg,#0c1324,#0b111d);
      border:1px solid rgba(255,255,255,.08);border-radius:14px;padding:14px;height:78px;
      display:flex;align-items:end;justify-content:flex-end;font-size:28px;font-weight:700;
      box-shadow:inset 0 0 0 1px rgba(255,255,255,.02)
    }
    .keys{display:grid;grid-template-columns:repeat(4,1fr);gap:10px}
    .k{
      padding:14px;border-radius:14px;border:1px solid rgba(255,255,255,.08);
      background:linear-gradient(180deg,#101a2b,#0d1524);color:var(--text);font-weight:700;font-size:16px;
      box-shadow:var(--shadow);cursor:pointer;transition:transform 120ms, box-shadow 120ms, background 120ms
    }
    .k.op{color:#c7d2fe;border-color:rgba(99,102,241,.35)}
    .k.eq{background:linear-gradient(180deg,#3c5dff,#3149d9);box-shadow:var(--ring)}
    .k:active{transform:translateY(1px);box-shadow:0 6px 16px rgba(0,0,0,.45)}
    .hist{max-height:220px;overflow:auto;padding-right:8px}
    .hist h4{margin:0 0 6px}
    .hist li{list-style:none;padding:6px 0;border-bottom:1px dashed rgba(255,255,255,.06);color:#9fb0ca;font-size:13px}
    .accordion{display:grid;gap:10px}
    .acc-item{border:1px solid rgba(255,255,255,.08);border-radius:14px;overflow:hidden;background:linear-gradient(180deg,#0f1b2e,#0d1423)}
    .acc-h{display:flex;align-items:center;justify-content:space-between;padding:14px 16px;cursor:pointer;font-weight:700}
    .acc-c{max-height:0;overflow:hidden;transition:max-height .35s ease}
    .acc-item.open .acc-c{max-height:380px}
    pre{margin:0;padding:14px 16px;overflow:auto;font-family:ui-monospace, SFMono-Regular, Menlo, Consolas, monospace;
      background:#0a0f1a;border-top:1px solid rgba(255,255,255,.06)}
    .grid{display:grid;grid-template-columns:repeat(12,1fr);gap:14px}
    .col-4{grid-column:span 4}
    .col-6{grid-column:span 6}
    .col-8{grid-column:span 8}
    .col-12{grid-column:span 12}
    .media{border-radius:14px;overflow:hidden;border:1px solid rgba(255,255,255,.08);box-shadow:var(--shadow)}
    .media img,.media video{width:100%;height:100%;object-fit:cover;display:block}
    .caption{padding:10px;color:#aab6cb;font-size:12px;background:linear-gradient(180deg,#0c1324,#0b111d)}
    .login-form{display:grid;gap:14px;max-width:400px;margin:0 auto}
    .input-field{
      padding:14px;border-radius:14px;border:1px solid rgba(255,255,255,.08);
      background:linear-gradient(180deg,#101a2b,#0d1524);color:var(--text);font-size:16px;
      box-shadow:inset 0 0 0 1px rgba(255,255,255,.02);outline:none
    }
    .input-field:focus{border-color:rgba(99,102,241,.35);box-shadow:var(--ring)}
    .error-msg{color:#ff6b6b;font-size:14px;display:none;margin-top:8px}
    .profile-card{display:grid;gap:20px;max-width:600px;margin:0 auto}
    .profile-header{display:flex;align-items:center;gap:20px;padding:20px;background:linear-gradient(135deg,#1a2440,#0e1726);border-radius:14px}
    .avatar{width:80px;height:80px;border-radius:50%;background:linear-gradient(135deg,var(--primary),var(--accent));display:grid;place-items:center;font-size:32px;font-weight:800;box-shadow:0 10px 30px rgba(99,102,241,.4)}
    .profile-info{flex:1}
    .profile-info h3{margin:0 0 4px;font-size:24px}
    .profile-info p{margin:0;color:var(--muted);font-size:14px}
    .info-grid{display:grid;gap:12px}
    .info-item{padding:16px;background:linear-gradient(180deg,#0f1b2e,#0d1423);border-radius:12px;border:1px solid rgba(255,255,255,.06)}
    .info-label{font-size:12px;color:var(--muted);font-weight:600;margin-bottom:4px}
    .info-value{font-size:16px;color:var(--text);font-weight:600}
    footer{max-width:1200px;margin:0 auto 40px;padding:0 20px;color:#93a4be;font-size:12px}
    @media (max-width:980px){
      .menu-grid{grid-template-columns:repeat(2,1fr)}
      .hero{grid-template-columns:1fr}
      .col-4,.col-6,.col-8{grid-column:span 12}
      .profile-header{flex-direction:column;text-align:center}
    }
    @media (prefers-reduced-motion:reduce){
      *{animation:none!important;transition:none!important}
      .bg-orbs{filter:none}
    }
  </style>
</head>
<body>
  <div class="bg-orbs" aria-hidden="true">
    <div class="orb o1"></div>
    <div class="orb o2"></div>
    <div class="orb o3"></div>
  </div>

  <header>
    <div class="topbar">
      <div class="brand" role="banner">
        <div class="logo" aria-hidden="true"></div>
        <div>
          <h1>Actividad 9</h1>
          <small>Men√∫ interactivo ¬∑ Calculadora ¬∑ Docs ¬∑ Media ¬∑ Perfil</small>
        </div>
      </div>
      <div class="actions">
        <button class="btn ghost" id="openMenu" aria-haspopup="dialog" aria-controls="menuPanel">Men√∫</button>
        <button class="btn primary" data-nav="#calculadora">Ir a Calculadora</button>
        <button class="btn logout-btn" id="logoutBtn">Cerrar Sesi√≥n</button>
      </div>
    </div>
  </header>

  <div class="spotlight" aria-hidden="true"></div>

  <div class="menu" id="menu">
    <div class="panel card" role="dialog" aria-modal="true" aria-label="Navegaci√≥n" id="menuPanel">
      <div style="display:flex;justify-content:space-between;align-items:center;margin-bottom:10px">
        <span class="pill">Navegaci√≥n r√°pida</span>
        <button class="btn" id="closeMenu">Cerrar</button>
      </div>
      <div class="menu-grid">
        <div class="tile" data-nav="#inicio">
          <span class="tag">Intro</span>
          <h3>Inicio</h3>
          <p>Bienvenida y contexto</p>
        </div>
        <div class="tile" data-nav="#calculadora">
          <span class="tag">Tools</span>
          <h3>Calculadora</h3>
          <p>Historial, teclado, operaciones</p>
        </div>
        <div class="tile" data-nav="#codigo">
          <span class="tag">Docs</span>
          <h3>Explicaci√≥n del c√≥digo</h3>
          <p>HTML, CSS, JS en acorde√≥n</p>
        </div>
        <div class="tile" data-nav="#galeria">
          <span class="tag">Media</span>
          <h3>Galer√≠a</h3>
          <p>Im√°genes y videos de ejemplo</p>
        </div>
        <div class="tile" data-nav="#datos-personales">
          <span class="tag">Profile</span>
          <h3>Datos Personales</h3>
          <p>Informaci√≥n del estudiante</p>
        </div>
      </div>
    </div>
  </div>

  <main>
    <section id="login">
      <div class="card" style="max-width:500px;margin:0 auto">
        <h2 class="title" style="font-size:28px;text-align:center">Iniciar Sesi√≥n</h2>
        <p class="lead" style="text-align:center">Ingresa tus credenciales para continuar</p>
        <form class="login-form" id="loginForm">
          <div>
            <label for="username" style="display:block;margin-bottom:6px;font-weight:600">Usuario</label>
            <input type="text" id="username" class="input-field" placeholder="Ingresa tu usuario" required autocomplete="username">
          </div>
          <div>
            <label for="password" style="display:block;margin-bottom:6px;font-weight:600">Contrase√±a</label>
            <input type="password" id="password" class="input-field" placeholder="Ingresa tu contrase√±a" required autocomplete="current-password">
          </div>
          <button type="submit" class="btn primary" style="width:100%">Iniciar Sesi√≥n</button>
          <p class="error-msg" id="loginError">Usuario o contrase√±a incorrectos</p>
        </form>
      </div>
    </section>

    <section id="inicio">
      <div class="hero">
        <div class="card">
          <h2 class="title">Bienvenido a Actividad 9</h2>
          <p class="lead">Un men√∫ interactivo con spotlight, calculadora funcional con historial, documentaci√≥n en acorde√≥n y galer√≠a multimedia.</p>
          <div style="display:flex;gap:10px;flex-wrap:wrap">
            <span class="pill">‚ú® Glassmorphism</span>
            <span class="pill">üé® Gradientes din√°micos</span>
            <span class="pill">‚ö° Interacciones fluidas</span>
          </div>
          <div style="margin-top:20px;display:flex;gap:10px">
            <button class="btn primary" data-nav="#calculadora">Probar calculadora</button>
            <button class="btn" data-nav="#codigo">Ver documentaci√≥n</button>
          </div>
        </div>
        <div class="card">
          <h3 style="margin:0 0 12px;font-weight:700">Caracter√≠sticas principales</h3>
          <ul style="padding-left:20px;margin:0;color:var(--muted)">
            <li style="margin-bottom:8px">Men√∫ overlay con efecto spotlight siguiendo el cursor</li>
            <li style="margin-bottom:8px">Calculadora con soporte de teclado y operaciones encadenadas</li>
            <li style="margin-bottom:8px">Historial de c√°lculos persistente con opci√≥n de limpieza</li>
            <li style="margin-bottom:8px">Documentaci√≥n expandible con acorde√≥n</li>
            <li style="margin-bottom:8px">Galer√≠a multimedia responsive</li>
            <li style="margin-bottom:8px">Sistema de login con sesi√≥n persistente</li>
            <li style="margin-bottom:8px">Perfil de estudiante con datos personales</li>
          </ul>
        </div>
      </div>
    </section>

    <section id="calculadora">
      <div class="card">
        <h2 class="title" style="font-size:28px">Calculadora Interactiva</h2>
        <p class="lead">Incluye soporte de teclado, operaciones encadenadas y historial persistente.</p>
        <div style="display:grid;grid-template-columns:1.2fr .8fr;gap:20px">
          <div class="calc">
            <div class="display" id="display">0</div>
            <div class="keys">
              <div class="k" data-key="7">7</div>
              <div class="k" data-key="8">8</div>
              <div class="k" data-key="9">9</div>
              <div class="k op" data-key="/">√∑</div>
              <div class="k" data-key="4">4</div>
              <div class="k" data-key="5">5</div>
              <div class="k" data-key="6">6</div>
              <div class="k op" data-key="*">√ó</div>
              <div class="k" data-key="1">1</div>
              <div class="k" data-key="2">2</div>
              <div class="k" data-key="3">3</div>
              <div class="k op" data-key="-">‚àí</div>
              <div class="k" data-key="0">0</div>
              <div class="k" data-key=".">.</div>
              <div class="k eq" data-key="=">=</div>
              <div class="k op" data-key="+">+</div>
              <div class="k op" data-key="c" style="grid-column:span 2">C</div>
              <div class="k op" data-key="Backspace" style="grid-column:span 2">‚å´</div>
            </div>
          </div>
          <div class="card" style="background:var(--card-strong)">
            <div class="hist">
              <div style="display:flex;justify-content:space-between;align-items:center;margin-bottom:12px">
                <h4 style="margin:0">Historial</h4>
                <button class="btn danger" id="clearHistory" style="padding:6px 10px;font-size:12px">Limpiar</button>
              </div>
              <ul id="history" style="padding:0;margin:0"></ul>
            </div>
          </div>
        </div>
      </div>
    </section>

    <section id="codigo">
      <div class="card">
        <h2 class="title" style="font-size:28px">Documentaci√≥n del C√≥digo</h2>
        <p class="lead">Explicaci√≥n detallada de la estructura HTML, estilos CSS y l√≥gica JavaScript.</p>
        <div class="accordion">
          <div class="acc-item">
            <div class="acc-h">
              <span>Estructura HTML</span>
              <span>‚ñº</span>
            </div>
            <div class="acc-c">
              <pre>&lt;header&gt; con topbar fijo
&lt;main&gt; con secciones de navegaci√≥n
  - #login: formulario de autenticaci√≥n
  - #inicio: hero con presentaci√≥n
  - #calculadora: interfaz de c√°lculo
  - #codigo: documentaci√≥n
  - #galeria: grid multimedia
  - #datos-personales: perfil del estudiante
&lt;footer&gt; con informaci√≥n adicional</pre>
            </div>
          </div>
          <div class="acc-item">
            <div class="acc-h">
              <span>Estilos CSS</span>
              <span>‚ñº</span>
            </div>
            <div class="acc-c">
              <pre>Variables CSS custom properties
Glassmorphism con backdrop-filter
Gradientes radiales y lineales
Animaciones keyframes para orbes
Transiciones suaves en hover
Grid layouts responsivos
Media queries para m√≥vil</pre>
            </div>
          </div>
          <div class="acc-item">
            <div class="acc-h">
              <span>JavaScript</span>
              <span>‚ñº</span>
            </div>
            <div class="acc-c">
              <pre>Router SPA con location.hash
Sistema de autenticaci√≥n con localStorage
Calculadora con eval seguro
Historial persistente con funci√≥n de limpieza
Spotlight siguiendo cursor
Event delegation para navegaci√≥n
Acorde√≥n toggle
Soporte de teclado</pre>
            </div>
          </div>
        </div>
      </div>
    </section>

    <section id="galeria">
      <div class="card">
        <h2 class="title" style="font-size:28px">Galer√≠a Multimedia</h2>
        <p class="lead">Colecci√≥n de paisajes y naturaleza.</p>
        <div class="grid">
          <div class="col-6">
            <div class="media">
              <img src="https://images.unsplash.com/photo-1506905925346-21bda4d32df4?w=600&h=400&fit=crop" alt="Monta√±as nevadas con picos blancos cubiertos de nieve bajo un cielo azul despejado y nubes suaves">
              <div class="caption">Paisaje de monta√±a - Majestuosas monta√±as nevadas</div>
            </div>
          </div>
          <div class="col-6">
            <div class="media">
              <img src="https://images.unsplash.com/photo-1507525428034-b723cf961d3e?w=600&h=400&fit=crop" alt="Playa tropical con arena blanca, palmeras verdes y agua cristalina color turquesa bajo el sol brillante">
              <div class="caption">Playa paradis√≠aca - Arena blanca y agua cristalina</div>
            </div>
          </div>
          <div class="col-12">
            <div class="media">
              <video controls style="width:100%;height:400px">
                <source src="https://commondatastorage.googleapis.com/gtv-videos-bucket/sample/BigBuckBunny.mp4" type="video/mp4">
                Tu navegador no soporta videos HTML5.
              </video>
              <div class="caption">Video ejemplo - Animaci√≥n de personajes animados</div>
            </div>
          </div>
        </div>
      </div>
    </section>

    <section id="datos-personales">
      <div class="card">
        <h2 class="title" style="font-size:28px;text-align:center">Datos Personales</h2>
        <p class="lead" style="text-align:center">Informaci√≥n del estudiante</p>
        <div class="profile-card">
          <div class="profile-header">
            <div class="avatar">JF</div>
            <div class="profile-info">
              <h3>Jorge Luis Alejandro Franco Berganza</h3>
              <p>Estudiante de Desarrollo Web</p>
            </div>
          </div>
          <div class="info-grid">
            <div class="info-item">
              <div class="info-label">NOMBRE COMPLETO</div>
              <div class="info-value">Jorge Luis Alejandro Franco Berganza</div>
            </div>
            <div class="info-item">
              <div class="info-label">CARNET</div>
              <div class="info-value">0901-22-11966</div>
            </div>
            <div class="info-item">
              <div class="info-label">CORREO ELECTR√ìNICO</div>
              <div class="info-value">jfrancob1@miumg.edu.gt</div>
            </div>
            <div class="info-item">
              <div class="info-label">PROYECTO</div>
              <div class="info-value">Actividad 9 - Desarrollo Web</div>
            </div>
          </div>
        </div>
      </div>
    </section>
  </main>

  <footer>
    <p style="text-align:center;margin:0">Actividad 9 - Desarrollo Web | Jorge Luis Alejandro Franco Berganza</p>
  </footer>

  <script>
    // ====== SISTEMA DE AUTENTICACI√ìN ======
    const DEFAULT_USER = 'alumno';
    const DEFAULT_PASS = '2025';
    let isLoggedIn = localStorage.getItem('userLoggedIn') === 'true';

    function checkLogin() {
      const header = document.querySelector('header');
      const logoutBtn = document.getElementById('logoutBtn');
      
      if (isLoggedIn) {
        header.style.display = 'block';
        logoutBtn.style.display = 'block';
        if (location.hash === '#login' || location.hash === '') {
          location.hash = '#inicio';
        }
      } else {
        header.style.display = 'none';
        logoutBtn.style.display = 'none';
        location.hash = '#login';
      }
    }

    function handleLogin(e) {
      e.preventDefault();
      const username = document.getElementById('username').value;
      const password = document.getElementById('password').value;
      const errorMsg = document.getElementById('loginError');

      if (username === DEFAULT_USER && password === DEFAULT_PASS) {
        localStorage.setItem('userLoggedIn', 'true');
        isLoggedIn = true;
        errorMsg.style.display = 'none';
        checkLogin();
        location.hash = '#inicio';
      } else {
        errorMsg.style.display = 'block';
      }
    }

    function logout() {
      localStorage.removeItem('userLoggedIn');
      isLoggedIn = false;
      checkLogin();
    }

    document.getElementById('loginForm').addEventListener('submit', handleLogin);
    document.getElementById('logoutBtn').addEventListener('click', logout);

    // ====== ROUTER ======
    function go(hash) {
      if (!isLoggedIn && hash !== '#login') {
        location.hash = '#login';
        return;
      }
      
      document.querySelectorAll('section').forEach(s => s.classList.remove('active'));
      const target = document.querySelector(hash);
      if (target) target.classList.add('active');
      document.body.classList.remove('menu-open');
    }

    window.addEventListener('hashchange', () => go(location.hash || '#login'));
    document.addEventListener('DOMContentLoaded', () => {
      checkLogin();
      go(location.hash || (isLoggedIn ? '#inicio' : '#login'));
    });

    // ====== MEN√ö ======
    const openBtn = document.getElementById('openMenu');
    const closeBtn = document.getElementById('closeMenu');
    const menuEl = document.getElementById('menu');
    const spotlight = document.querySelector('.spotlight');

    openBtn.addEventListener('click', () => document.body.classList.add('menu-open'));
    closeBtn.addEventListener('click', () => document.body.classList.remove('menu-open'));
    menuEl.addEventListener('click', e => {
      if (e.target === menuEl) document.body.classList.remove('menu-open');
    });

    document.addEventListener('mousemove', e => {
      spotlight.style.setProperty('--x', e.clientX + 'px');
      spotlight.style.setProperty('--y', e.clientY + 'px');
    });

    document.querySelectorAll('.tile').forEach(tile => {
      tile.addEventListener('mousemove', e => {
        const rect = tile.getBoundingClientRect();
        const x = ((e.clientX - rect.left) / rect.width) * 100;
        const y = ((e.clientY - rect.top) / rect.height) * 100;
        tile.style.setProperty('--mx', x + '%');
        tile.style.setProperty('--my', y + '%');
      });
    });

    // ====== NAVEGACI√ìN ======
    document.addEventListener('click', e => {
      const nav = e.target.closest('[data-nav]');
      if (nav) {
        const hash = nav.dataset.nav;
        location.hash = hash;
      }
    });

    // ====== CALCULADORA ======
    let currentInput = '0';
    let operator = '';
    let previousValue = '';
    const displayEl = document.getElementById('display');
    const historyEl = document.getElementById('history');
    let history = JSON.parse(localStorage.getItem('calcHistory')) || [];

    function updateDisplay() {
      displayEl.textContent = currentInput;
    }

    function addHistory(operation, result) {
      history.unshift({ op: operation, res: result });
      if (history.length > 10) history.pop();
      localStorage.setItem('calcHistory', JSON.stringify(history));
      renderHistory();
    }

    function renderHistory() {
      if (history.length === 0) {
        historyEl.innerHTML = '<li style="color:var(--muted);text-align:center">No hay historial</li>';
      } else {
        historyEl.innerHTML = history.map(h => 
          `<li>${h.op} = ${h.res}</li>`
        ).join('');
      }
    }

    function clearHistory() {
      history = [];
      localStorage.removeItem('calcHistory');
      renderHistory();
    }

    document.getElementById('clearHistory').addEventListener('click', clearHistory);

    function calculate() {
      if (operator && previousValue !== '') {
        const prev = parseFloat(previousValue);
        const curr = parseFloat(currentInput);
        let result;
        switch(operator) {
          case '+': result = prev + curr; break;
          case '-': result = prev - curr; break;
          case '*': result = prev * curr; break;
          case '/': result = prev / curr; break;
          default: return;
        }
        addHistory(`${prev} ${operator} ${curr}`, result);
        currentInput = String(result);
        operator = '';
        previousValue = '';
      }
    }

    document.querySelectorAll('.k').forEach(key => {
      key.addEventListener('click', () => {
        const val = key.dataset.key;
        
        if (val === 'c') {
          currentInput = '0';
          operator = '';
          previousValue = '';
        } else if (val === 'Backspace') {
          currentInput = currentInput.length > 1 ? currentInput.slice(0, -1) : '0';
        } else if (['+', '-', '*', '/'].includes(val)) {
          if (operator && previousValue !== '') calculate();
          operator = val;
          previousValue = currentInput;
          currentInput = '0';
        } else if (val === '=') {
          calculate();
        } else {
          if (currentInput === '0') currentInput = val;
          else currentInput += val;
        }
        
        updateDisplay();
      });
    });

    document.addEventListener('keydown', e => {
      const section = document.querySelector('#calculadora');
      if (!section.classList.contains('active')) return;
      
      const key = e.key;
      if (/[0-9.]/.test(key)) {
        if (currentInput === '0') currentInput = key;
        else currentInput += key;
        updateDisplay();
      } else if (['+', '-', '*', '/'].includes(key)) {
        if (operator && previousValue !== '') calculate();
        operator = key;
        previousValue = currentInput;
        currentInput = '0';
        updateDisplay();
      } else if (key === 'Enter' || key === '=') {
        calculate();
        updateDisplay();
      } else if (key === 'Backspace') {
        currentInput = currentInput.length > 1 ? currentInput.slice(0, -1) : '0';
        updateDisplay();
      } else if (key === 'Escape' || key.toLowerCase() === 'c') {
        currentInput = '0';
        operator = '';
        previousValue = '';
        updateDisplay();
      }
    });

    renderHistory();

    // ====== ACORDE√ìN ======
    document.querySelectorAll('.acc-h').forEach(header => {
      header.addEventListener('click', () => {
        const item = header.parentElement;
        const wasOpen = item.classList.contains('open');
        
        document.querySelectorAll('.acc-item').forEach(i => i.classList.remove('open'));
        if (!wasOpen) item.classList.add('open');
      });
    });
  </script>
</body>
</html>